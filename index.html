<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Night Sky Perceptions</title>
    <style>
        body { margin: 0; overflow: hidden; background: black; }
        #sky { display: block; }
    </style>
</head>
<body>
    <canvas id="sky"></canvas>
    <script>
        let c = document.getElementById('sky');
        let ctx = c.getContext('2d');
        c.width = window.innerWidth;
        c.height = window.innerHeight;

        // Stars: barely perceptible movement
        let objects = [];
        for (let i = 0; i < 50; i++) {
            objects.push({
                x: Math.random() * c.width,
                y: Math.random() * c.height,
                speed: 0.01, // ~0.6px/sec, noticeable after 3-5 min
                color: 'white'
            });
        }

        // Two planes for realism
        let planes = [
            { z: 100, size: 3, color: 'red', speedZ: 0.4, zigzagFreq: 0.02, active: true },
            { z: 120, size: 3, color: 'yellow', speedZ: 0.35, zigzagFreq: 0.025, active: true }
        ];
        let t = 0;

        function draw() {
            // Clear canvas
            ctx.fillStyle = 'black';
            ctx.fillRect(0, 0, c.width, c.height);

            // Draw stars
            for (let o of objects) {
                ctx.fillStyle = o.color;
                ctx.fillRect(o.x, o.y, 1, 1);
                o.x += o.speed;
                if (o.x > c.width) o.x = 0;
            }

            // Draw planes
            for (let plane of planes) {
                if (plane.active) {
                    // Approach: decrease z, increase size
                    if (t < 200) {
                        plane.z -= plane.speedZ;
                        plane.size = 3 + (100 - plane.z) * 0.1;
                    }
                    let px = c.width / 2 + Math.sin(t * plane.zigzagFreq) * 200;
                    let py = c.height / 2 - t * 0.5;
                    if (t > 200) {
                        px += (t - 200) * 3; // Bank right
                    }
                    if (px < c.width && py > 0 && plane.z > 0) {
                        ctx.fillStyle = plane.color;
                        ctx.fillRect(px - plane.size / 2, py - plane.size / 2, plane.size, plane.size);
                    } else {
                        plane.active = false;
                    }
                    plane.px = px; // Store for mini-map
                    plane.py = py;
                }
            }

            // Mini-map
            let miniSize = 150;
            let miniX = c.width - miniSize - 20;
            let miniY = c.height - miniSize - 20;
            ctx.fillStyle = 'rgba(0,0,0,0.7)';
            ctx.fillRect(miniX, miniY, miniSize, miniSize);
            ctx.strokeStyle = 'white';
            ctx.lineWidth = 1;
            ctx.strokeRect(miniX, miniY, miniSize, miniSize);
            ctx.fillStyle = 'white';
            ctx.font = '12px Arial';
            ctx.fillText('N', miniX + miniSize / 2 - 5, miniY + 15);
            ctx.fillText('S', miniX + miniSize / 2 - 5, miniY + miniSize - 5);
            ctx.fillText('W', miniX + 5, miniY + miniSize / 2 + 5);
            ctx.fillText('E', miniX + miniSize - 15, miniY + miniSize / 2 + 5);
            ctx.beginPath();
            ctx.moveTo(miniX + miniSize / 2, miniY);
            ctx.lineTo(miniX + miniSize / 2, miniY + miniSize);
            ctx.moveTo(miniX, miniY + miniSize / 2);
            ctx.lineTo(miniX + miniSize, miniY + miniSize / 2);
            ctx.stroke();

            // Plot planes in mini-map with speed labels
            for (let plane of planes) {
                if (plane.active && plane.z > 0) {
                    let mapX = miniSize / 2 + (plane.px - c.width / 2) / 10;
                    let mapY = miniSize / 2 - (plane.py - c.height / 2) / 10 + plane.z / 10;
                    ctx.fillStyle = plane.color;
                    ctx.fillRect(miniX + mapX - 2, miniY + mapY - 2, 4, 4);
                    // Speed label (scaled from z)
                    let speed = (100 - plane.z) / 2; // Arbitrary units
                    ctx.fillStyle = 'white';
                    ctx.fillText(`${plane.color}: ${speed.toFixed(1)}`, miniX + 10, miniY + 30 + planes.indexOf(plane) * 15);
                }
            }

            t++;
            requestAnimationFrame(draw);
        }

        draw();
    </script>
</body>
</html>